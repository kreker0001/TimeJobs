{% extends "base.html" %}
{% block title %}Регистрация — Time Jobs{% endblock %}

{% block content %}
<section class="min-h-[calc(100vh-80px)] flex items-center justify-center px-4">
    <div class="glass-card w-full max-w-md p-6 rounded-2xl">
        <div class="w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3"
             style="background:var(--tj)">
            <span class="text-black font-bold">tj</span>
        </div>
        <h1 class="text-2xl font-bold text-center mb-4">Регистрация</h1>
        <form method="post" class="flex flex-col gap-3">
            <input name="name" placeholder="Имя"
                   class="px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm">
            <input name="email" type="email" placeholder="Почта"
                   class="px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm">

            <input type="hidden" name="role" id="role-input" value="worker">

            <div class="grid grid-cols-2 gap-2 text-sm">
                <button type="button" data-role="worker"
                        class="px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-center">
                    Соискатель
                </button>
                <button type="button" data-role="employer"
                        class="px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-center">
                    Компания
                </button>
            </div>

            <input name="password" type="password" placeholder="Пароль"
                   class="px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-sm">

            <button class="bg-[var(--tj)] text-black font-semibold py-2 rounded-lg">
                Создать аккаунт
            </button>
        </form>
        <p class="text-center text-sm text-gray-400 mt-4">
            Уже есть аккаунт?
            <a href="{{ url_for('login') }}" class="text-[var(--tj)] hover:underline">Войти</a>
        </p>
    </div>
</section>
{% endblock %}

{% block body_extra %}
<script>
    const buttons = document.querySelectorAll('[data-role]');
    const roleInput = document.getElementById('role-input');
    buttons.forEach(btn => {
        btn.addEventListener('click', () => {
            const r = btn.getAttribute('data-role');
            roleInput.value = r;
            window.tjToast('Роль: ' + (r === 'worker' ? 'Соискатель' : 'Компания'), 'success');
            buttons.forEach(b => b.classList.remove('border-green-500'));
            btn.classList.add('border-green-500');
        });
    });
</script>
{% endblock %}
