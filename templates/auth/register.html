{% extends "base.html" %}
{% block title %}Регистрация — Time Jobs{% endblock %}

{% block content %}
<section class="tj-auth">
    <div class="tj-auth__card">
        <div class="tj-auth__avatar">TJ</div>

        <h1 class="tj-auth__title">Регистрация</h1>
        <p class="tj-auth__subtitle">
            Создайте аккаунт, чтобы откликаться на смены или публиковать вакансии.
        </p>

        <form method="post" class="tj-auth__form">
            <input name="name" placeholder="Имя" class="tj-auth__input">
            <input name="email" type="email" placeholder="Почта" class="tj-auth__input">

            <input type="hidden" name="role" id="role-input" value="worker">

            <div class="tj-auth__roles">
                <button type="button" data-role="worker"
                        class="tj-auth__role-btn tj-auth__role-btn--active">
                    Соискатель
                </button>
                <button type="button" data-role="employer"
                        class="tj-auth__role-btn">
                    Компания
                </button>
            </div>

            <input name="password" type="password" placeholder="Пароль"
                   class="tj-auth__input">

            <button type="submit" class="tj-auth__submit">
                Создать аккаунт
            </button>
        </form>

        <p class="tj-auth__footer">
            Уже есть аккаунт?
            <a href="{{ url_for('login') }}">Войти</a>
        </p>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    const tjRoleButtons = document.querySelectorAll('[data-role]');
    const tjRoleInput = document.getElementById('role-input');

    tjRoleButtons.forEach(function (btn) {
        btn.addEventListener('click', function () {
            const role = btn.getAttribute('data-role');
            tjRoleInput.value = role;

            tjRoleButtons.forEach(function (b) {
                b.classList.remove('tj-auth__role-btn--active');
            });
            btn.classList.add('tj-auth__role-btn--active');

            // красивый тост, если на главной уже подключен window.tjToast
            if (window.tjToast) {
                window.tjToast(
                    'Роль: ' + (role === 'worker' ? 'Соискатель' : 'Компания'),
                    'success'
                );
            }
        });
    });
</script>
{% endblock %}